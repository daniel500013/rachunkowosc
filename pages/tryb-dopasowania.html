<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tryb Dopasowania - Nauka Bilansu</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Pacifico&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #fff5f9;
        }
        h1, h2, h3 {
            font-family: 'Pacifico', cursive;
        }
        .kawaii-icon {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            background: linear-gradient(45deg, #ff99cc, #ff80bf);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        .btn-kawaii {
            background: linear-gradient(45deg, #ff99cc, #ff66b3);
            border-radius: 50px;
            color: white;
            font-weight: 600;
            padding: 0.75rem 1.5rem;
            box-shadow: 0 4px 6px rgba(255, 153, 204, 0.3);
            transition: all 0.3s;
        }
        .btn-kawaii:hover {
            box-shadow: 0 6px 8px rgba(255, 153, 204, 0.4);
            transform: translateY(-2px);
        }
        .btn-kawaii.disabled-button {
            opacity: 0.5;
            cursor: not-allowed;
            box-shadow: none;
            transform: none;
        }
        .btn-kawaii.disabled-button:hover {
            box-shadow: none;
            transform: none;
        }
        .item-box {
            cursor: pointer;
            user-select: none;
            transition: all 0.2s;
            background-color: white;
            border: 2px solid #ffcce6;
            border-radius: 12px;
            padding: 0.75rem;
            margin-bottom: 0.5rem;
        }
        .item-box:hover {
            box-shadow: 0 4px 6px rgba(255, 102, 179, 0.2);
            transform: translateY(-2px);
        }
        .item-box.selected {
            border-color: #ff66b3;
            background-color: #fff0f8;
            box-shadow: 0 0 0 3px rgba(255, 102, 179, 0.3);
        }
        .drop-zone {
            min-height: 60px;
            border: 2px dashed #ffcce6;
            border-radius: 12px;
            background-color: rgba(255, 242, 246, 0.5);
            transition: all 0.2s;
            padding: 1rem;
            margin-bottom: 0.5rem;
            cursor: pointer;
        }
        .drop-zone:hover {
            background-color: rgba(255, 204, 230, 0.3);
            border-color: #ff80bf;
        }
        .drop-zone.highlight {
            background-color: rgba(255, 204, 230, 0.3);
            border-color: #ff80bf;
        }
        .drop-zone-title {
            color: #ff80bf;
            text-align: center;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        .feedback-correct {
            background-color: rgba(167, 243, 208, 0.3);
            border-color: #10B981;
        }
        .feedback-incorrect {
            background-color: rgba(254, 202, 202, 0.3);
            border-color: #EF4444;
        }
        .score-display {
            font-size: 1.25rem;
            font-weight: 600;
            color: #ff66b3;
            border: 2px solid #ffcce6;
            display: inline-block;
            padding: 0.5rem 1.5rem;
            background-color: white;
            border-radius: 50px;
            box-shadow: 0 4px 6px rgba(255, 153, 204, 0.2);
        }
        .item-container {
            padding: 5px;
        }
        @media (max-width: 768px) {
            .item-box {
                margin-bottom: 0.75rem;
            }
            .drop-zone {
                min-height: 60px;
                margin-bottom: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- NagÅ‚Ã³wek -->
    <header class="bg-gradient-to-r from-pink-400 to-pink-600 text-white py-8 shadow-lg relative overflow-hidden">
        <div class="container mx-auto px-4 relative z-10">
            <h1 class="text-3xl md:text-4xl text-center">âœ¨ Nauka Bilansu âœ¨</h1>
            <p class="text-center mt-2 text-white font-light">Tryb dopasowania</p>
        </div>
    </header>

    <!-- Nawigacja -->
    <nav class="bg-white py-4 shadow-md">
        <div class="container mx-auto px-4">
            <div class="flex flex-wrap justify-between items-center">
                <a href="../index.html" class="text-gray-600 mx-2 hover:text-pink-600 mb-2 md:mb-0">
                    <i class="fas fa-home mr-2"></i> Strona gÅ‚Ã³wna
                </a>
                <div class="flex flex-wrap">
                    <a href="tryb-wprowadzajacy.html" class="text-gray-600 mx-2 hover:text-pink-600 mb-2 md:mb-0">Tryb wprowadzajÄ…cy</a>
                    <a href="tryb-dopasowania.html" class="text-pink-600 mx-2 font-semibold">Tryb dopasowania</a>
                    <a href="tryb-quiz.html" class="text-gray-600 mx-2 hover:text-pink-600 mb-2 md:mb-0">Tryb quizu</a>
                    <a href="tryb-finalny.html" class="text-gray-600 mx-2 hover:text-pink-600 mb-2 md:mb-0">Tryb praktyczny</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- GÅ‚Ã³wna zawartoÅ›Ä‡ -->
    <main class="container mx-auto px-4 py-8">
        <!-- Wprowadzenie -->
        <section class="mb-10">
            <div class="bg-white rounded-3xl shadow-md p-6 md:p-8 border-4 border-purple-200">
                <h2 class="text-2xl md:text-3xl text-purple-600 text-center mb-6">Ä†wiczenia z dopasowania</h2>
                <p class="mb-4 text-gray-700">
                    W tym trybie Ä‡wiczymy przyporzÄ…dkowanie konkretnych pozycji do wÅ‚aÅ›ciwych kategorii bilansu. Kliknij element, ktÃ³ry chcesz przyporzÄ…dkowaÄ‡, a nastÄ™pnie kliknij na odpowiedniÄ… kategoriÄ™.
                </p>
                <p class="mb-4 text-gray-700">
                    JeÅ›li chcesz zmieniÄ‡ przypisanie elementu, po prostu kliknij na niego w dowolnym momencie i wybierz innÄ… kategoriÄ™.
                </p>
                <p class="mb-4 text-gray-700">
                    Po umieszczeniu wszystkich elementÃ³w, kliknij przycisk "SprawdÅº odpowiedzi", aby zobaczyÄ‡, ktÃ³re pozycje zostaÅ‚y prawidÅ‚owo przyporzÄ…dkowane.
                </p>
            </div>
        </section>

        <!-- Ustawienia -->
        <section class="mb-8">
            <div class="bg-white rounded-3xl shadow-md p-6 md:p-8 border-4 border-purple-200">
                <h3 class="text-xl text-purple-600 mb-4">Ustawienia Ä‡wiczenia</h3>
                
                <div class="flex flex-wrap items-center mb-4">
                    <label for="items-count" class="mr-4 text-gray-700 w-full md:w-auto mb-2 md:mb-0">Liczba elementÃ³w w Ä‡wiczeniu:</label>
                    <select id="items-count" class="bg-white border-2 border-pink-200 rounded-lg p-2 text-gray-700">
                        <option value="8">8 (Å‚atwe)</option>
                        <option value="12" selected>12 (Å›rednie)</option>
                        <option value="16">16 (trudne)</option>
                        <option value="20">20 (wyzwanie)</option>
                    </select>
                </div>
                
                <div class="flex flex-wrap items-center">
                    <label for="balanced-categories" class="mr-4 text-gray-700 w-full md:w-auto mb-2 md:mb-0">RÃ³wne proporcje kategorii:</label>
                    <input type="checkbox" id="balanced-categories" class="w-5 h-5 text-pink-500" checked>
                    <span class="ml-2 text-sm text-gray-500">(zapewnia elementy z kaÅ¼dej kategorii)</span>
                </div>
            </div>
        </section>

        <!-- Wynik -->
        <section class="mb-8 text-center">
            <div class="score-display">
                Punkty: <span id="score">0</span> / <span id="total-points">0</span>
            </div>
            <div id="status-message" class="mt-3 text-purple-600"></div>
        </section>

        <!-- Ä†wiczenie - Tryb Podstawowy -->
        <section id="basic-mode-section" class="mb-12">
            <div class="bg-white rounded-3xl shadow-md p-6 md:p-8 border-4 border-purple-200">
                <h3 class="text-xl text-purple-600 mb-6" id="exercise-title-basic">Ä†wiczenie: Dopasuj elementy bilansu</h3>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Kategorie docelowe -->
                    <div>
                        <h4 class="text-lg text-purple-600 mb-4">Kategorie bilansu:</h4>
                        
                        <div id="drop-aktywa-trwale" class="drop-zone mb-4" data-category="aktywa-trwale" onclick="dropItemToCategory(this)">
                            <div class="drop-zone-title">Aktywa trwaÅ‚e</div>
                        </div>
                        
                        <div id="drop-aktywa-obrotowe" class="drop-zone mb-4" data-category="aktywa-obrotowe" onclick="dropItemToCategory(this)">
                            <div class="drop-zone-title">Aktywa obrotowe</div>
                        </div>
                        
                        <div id="drop-kapital-wlasny" class="drop-zone mb-4" data-category="kapital-wlasny" onclick="dropItemToCategory(this)">
                            <div class="drop-zone-title">KapitaÅ‚ wÅ‚asny</div>
                        </div>
                        
                        <div id="drop-zobowiazania" class="drop-zone" data-category="zobowiazania" onclick="dropItemToCategory(this)">
                            <div class="drop-zone-title">ZobowiÄ…zania</div>
                        </div>
                    </div>
                    
                    <!-- Elementy do przyporzÄ…dkowania -->
                    <div>
                        <h4 class="text-lg text-purple-600 mb-2">Elementy do przyporzÄ…dkowania:</h4>
                        <p class="text-sm text-gray-600 mb-3"><i class="fas fa-info-circle mr-1"></i> Kliknij na element, a nastÄ™pnie kliknij na kategoriÄ™, do ktÃ³rej chcesz go przypisaÄ‡. MoÅ¼esz zmieniÄ‡ przypisanie w dowolnym momencie.</p>
                        <div id="items-container-basic" class="item-container">
                            <!-- Elementy bÄ™dÄ… dodawane przez JavaScript -->
                        </div>
                    </div>
                </div>
                
                <div class="mt-8 flex flex-wrap justify-center gap-4">
                    <button id="check-btn-basic" class="btn-kawaii bg-gradient-to-r from-green-400 to-green-500">
                        <i class="fas fa-check mr-2"></i> SprawdÅº odpowiedzi
                    </button>
                    
                    <button id="reset-btn-basic" class="btn-kawaii bg-gradient-to-r from-blue-400 to-blue-500">
                        <i class="fas fa-redo mr-2"></i> Nowe elementy
                    </button>
                </div>
            </div>
        </section>

        <!-- Podpowiedzi -->
        <section class="mb-12">
            <div class="bg-white rounded-3xl shadow-md p-6 md:p-8 border-4 border-purple-200">
                <h3 class="text-xl text-purple-600 mb-4">Podpowiedzi</h3>
                
                <div id="basic-hints" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h4 class="font-semibold text-purple-700 mb-2">Aktywa trwaÅ‚e</h4>
                        <p class="text-gray-700 mb-4">
                            Aktywa trwaÅ‚e to skÅ‚adniki majÄ…tku o przewidywanym okresie ekonomicznej uÅ¼ytecznoÅ›ci dÅ‚uÅ¼szym niÅ¼ rok, wykorzystywane na potrzeby dziaÅ‚alnoÅ›ci jednostki.
                        </p>
                        
                        <h4 class="font-semibold text-purple-700 mb-2">Aktywa obrotowe</h4>
                        <p class="text-gray-700">
                            Aktywa obrotowe to skÅ‚adniki majÄ…tku, ktÃ³re sÄ… przeznaczone do zbycia lub zuÅ¼ycia w ciÄ…gu 12 miesiÄ™cy od dnia bilansowego lub w ciÄ…gu normalnego cyklu operacyjnego.
                        </p>
                    </div>
                    
                    <div>
                        <h4 class="font-semibold text-purple-700 mb-2">KapitaÅ‚ wÅ‚asny</h4>
                        <p class="text-gray-700 mb-4">
                            KapitaÅ‚ wÅ‚asny to wartoÅ›Ä‡ majÄ…tku finansowanego przez wÅ‚aÅ›cicieli oraz z wypracowanych zyskÃ³w. Stanowi rÃ³Å¼nicÄ™ miÄ™dzy wartoÅ›ciÄ… aktywÃ³w a zobowiÄ…zaniami jednostki.
                        </p>
                        
                        <h4 class="font-semibold text-purple-700 mb-2">ZobowiÄ…zania</h4>
                        <p class="text-gray-700">
                            ZobowiÄ…zania to wynikajÄ…ce z przeszÅ‚ych zdarzeÅ„ obowiÄ…zki wykonania Å›wiadczeÅ„ o okreÅ›lonej wartoÅ›ci, ktÃ³re spowodujÄ… wykorzystanie juÅ¼ posiadanych lub przyszÅ‚ych aktywÃ³w jednostki.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Nawigacja miÄ™dzy trybami -->
        <section class="mb-12 text-center">
            <a href="tryb-wprowadzajacy.html" class="inline-block btn-kawaii bg-gradient-to-r from-gray-400 to-gray-500 mr-4">
                <i class="fas fa-arrow-left mr-2"></i> WrÃ³Ä‡ do trybu wprowadzajÄ…cego
            </a>
            <a href="tryb-quiz.html" class="inline-block btn-kawaii">
                PrzejdÅº do trybu quizu <i class="fas fa-arrow-right ml-2"></i>
            </a>
			<br/>
			<br/>
            <a href="bilans-konta-ksiegowe.html" class="inline-block btn-kawaii">
                PrzejdÅº do trybu kont ksiÄ™gowych <i class="fas fa-arrow-right ml-2"></i>
            </a>
        </section>
    </main>

    <!-- Stopka -->
    <footer class="bg-gradient-to-r from-purple-500 to-pink-500 text-white py-8">
        <div class="container mx-auto px-4 text-center">
            <div class="mb-4">
                <span class="inline-block mx-1">ðŸŒ¸</span>
                <span class="inline-block mx-1">ðŸ’œ</span>
                <span class="inline-block mx-1">ðŸŽ€</span>
                <span class="inline-block mx-1">âœ¨</span>
                <span class="inline-block mx-1">ðŸ’«</span>
            </div>
            <p>&copy; 2025 Nauka Bilansu - Projekt edukacyjny</p>
            <p class="text-purple-200 mt-2 text-sm">Strona stworzona w celach edukacyjnych</p>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // Definicja puli 100 elementÃ³w bilansu z bardziej szczegÃ³Å‚owymi kategoriami
        const bilansItems = [
            // Aktywa trwaÅ‚e - WartoÅ›ci niematerialne i prawne
            { id: "item-1", text: "Koszty zakoÅ„czonych prac rozwojowych", category: "wartosci-niematerialne" },
            { id: "item-2", text: "WartoÅ›Ä‡ firmy", category: "wartosci-niematerialne" },
            { id: "item-3", text: "Patent na technologiÄ™", category: "wartosci-niematerialne" },
            { id: "item-4", text: "Znak towarowy", category: "wartosci-niematerialne" },
            { id: "item-5", text: "Licencje na oprogramowanie", category: "wartosci-niematerialne" },
            { id: "item-6", text: "Prawo autorskie", category: "wartosci-niematerialne" },
            
            // Aktywa trwaÅ‚e - Rzeczowe aktywa trwaÅ‚e
            { id: "item-7", text: "Grunty wÅ‚asne", category: "rzeczowe-aktywa-trwale" },
            { id: "item-8", text: "Budynki i lokale", category: "rzeczowe-aktywa-trwale" },
            { id: "item-9", text: "UrzÄ…dzenia techniczne i maszyny", category: "rzeczowe-aktywa-trwale" },
            { id: "item-10", text: "Åšrodki transportu", category: "rzeczowe-aktywa-trwale" },
            { id: "item-11", text: "SprzÄ™t komputerowy", category: "rzeczowe-aktywa-trwale" },
            { id: "item-12", text: "Åšrodki trwaÅ‚e w budowie", category: "rzeczowe-aktywa-trwale" },
            
            // Aktywa trwaÅ‚e - NaleÅ¼noÅ›ci dÅ‚ugoterminowe
            { id: "item-13", text: "NaleÅ¼noÅ›ci z tytuÅ‚u kaucji dÅ‚ugoterminowych", category: "naleznosci-dlugoterminowe" },
            { id: "item-14", text: "NaleÅ¼noÅ›ci dÅ‚ugoterminowe od jednostek powiÄ…zanych", category: "naleznosci-dlugoterminowe" },
            { id: "item-15", text: "NaleÅ¼noÅ›ci od pozostaÅ‚ych jednostek", category: "naleznosci-dlugoterminowe" },
            
            // Aktywa trwaÅ‚e - Inwestycje dÅ‚ugoterminowe
            { id: "item-16", text: "NieruchomoÅ›ci inwestycyjne", category: "inwestycje-dlugoterminowe" },
            { id: "item-17", text: "WartoÅ›ci niematerialne i prawne inwestycyjne", category: "inwestycje-dlugoterminowe" },
            { id: "item-18", text: "DÅ‚ugoterminowe aktywa finansowe", category: "inwestycje-dlugoterminowe" },
            { id: "item-19", text: "UdziaÅ‚y lub akcje w innych jednostkach", category: "inwestycje-dlugoterminowe" },
            { id: "item-20", text: "Inne inwestycje dÅ‚ugoterminowe", category: "inwestycje-dlugoterminowe" },
            
            // Aktywa obrotowe - Zapasy
            { id: "item-21", text: "MateriaÅ‚y", category: "zapasy" },
            { id: "item-22", text: "PÃ³Å‚produkty i produkty w toku", category: "zapasy" },
            { id: "item-23", text: "Produkty gotowe", category: "zapasy" },
            { id: "item-24", text: "Towary handlowe", category: "zapasy" },
            { id: "item-25", text: "Zaliczki na dostawy i usÅ‚ugi", category: "zapasy" },
            
            // Aktywa obrotowe - NaleÅ¼noÅ›ci krÃ³tkoterminowe
            { id: "item-26", text: "NaleÅ¼noÅ›ci z tytuÅ‚u dostaw i usÅ‚ug", category: "naleznosci-krotkoterminowe" },
            { id: "item-27", text: "NaleÅ¼noÅ›ci z tytuÅ‚u podatkÃ³w i dotacji", category: "naleznosci-krotkoterminowe" },
            { id: "item-28", text: "NaleÅ¼noÅ›ci dochodzone na drodze sÄ…dowej", category: "naleznosci-krotkoterminowe" },
            { id: "item-29", text: "NaleÅ¼noÅ›ci od pracownikÃ³w", category: "naleznosci-krotkoterminowe" },
            { id: "item-30", text: "Inne naleÅ¼noÅ›ci", category: "naleznosci-krotkoterminowe" },
            
            // Aktywa obrotowe - Inwestycje krÃ³tkoterminowe
            { id: "item-31", text: "Åšrodki pieniÄ™Å¼ne w kasie", category: "inwestycje-krotkoterminowe" },
            { id: "item-32", text: "Åšrodki pieniÄ™Å¼ne na rachunkach bankowych", category: "inwestycje-krotkoterminowe" },
            { id: "item-33", text: "KrÃ³tkoterminowe papiery wartoÅ›ciowe", category: "inwestycje-krotkoterminowe" },
            { id: "item-34", text: "Udzielone poÅ¼yczki krÃ³tkoterminowe", category: "inwestycje-krotkoterminowe" },
            { id: "item-35", text: "Inne aktywa pieniÄ™Å¼ne", category: "inwestycje-krotkoterminowe" },
            
            // NaleÅ¼ne wpÅ‚aty na kapitaÅ‚ podstawowy
            { id: "item-36", text: "NaleÅ¼ne wpÅ‚aty na kapitaÅ‚ zakÅ‚adowy", category: "nalezne-wplaty" },
            { id: "item-37", text: "NaleÅ¼ne wpÅ‚aty na kapitaÅ‚ zapasowy", category: "nalezne-wplaty" },
            
            // UdziaÅ‚y (akcje) wÅ‚asne
            { id: "item-38", text: "UdziaÅ‚y (akcje) wÅ‚asne do zbycia", category: "udzialy-akcje-wlasne" },
            { id: "item-39", text: "Akcje wÅ‚asne wyemitowane", category: "udzialy-akcje-wlasne" },
            
            // KapitaÅ‚ wÅ‚asny - KapitaÅ‚ zakÅ‚adowy
            { id: "item-40", text: "KapitaÅ‚ zakÅ‚adowy spÃ³Å‚ki akcyjnej", category: "kapital-zakladowy" },
            { id: "item-41", text: "KapitaÅ‚ zakÅ‚adowy spÃ³Å‚ki z o.o.", category: "kapital-zakladowy" },
            { id: "item-42", text: "Fundusz zaÅ‚oÅ¼ycielski", category: "kapital-zakladowy" },
            
            // KapitaÅ‚ wÅ‚asny - KapitaÅ‚ zapasowy
            { id: "item-43", text: "KapitaÅ‚ z emisji akcji powyÅ¼ej wartoÅ›ci nominalnej", category: "kapital-zapasowy" },
            { id: "item-44", text: "KapitaÅ‚ zapasowy utworzony z zysku", category: "kapital-zapasowy" },
            { id: "item-45", text: "KapitaÅ‚ zapasowy z dopÅ‚at wspÃ³lnikÃ³w", category: "kapital-zapasowy" },
            
            // KapitaÅ‚ wÅ‚asny - KapitaÅ‚ z aktualizacji wyceny
            { id: "item-46", text: "KapitaÅ‚ z aktualizacji wyceny Å›rodkÃ³w trwaÅ‚ych", category: "kapital-z-aktualizacji" },
            { id: "item-47", text: "KapitaÅ‚ z aktualizacji wyceny inwestycji", category: "kapital-z-aktualizacji" },
            
            // KapitaÅ‚ wÅ‚asny - PozostaÅ‚e kapitaÅ‚y rezerwowe
            { id: "item-48", text: "KapitaÅ‚ rezerwowy utworzony zgodnie ze statutem", category: "kapitaly-rezerwowe" },
            { id: "item-49", text: "KapitaÅ‚ rezerwowy z dopÅ‚at wspÃ³lnikÃ³w", category: "kapitaly-rezerwowe" },
            { id: "item-50", text: "KapitaÅ‚ rezerwowy na wykup akcji wÅ‚asnych", category: "kapitaly-rezerwowe" },
            
            // KapitaÅ‚ wÅ‚asny - Zysk (strata) z lat ubiegÅ‚ych
            { id: "item-51", text: "Niepodzielony zysk z lat ubiegÅ‚ych", category: "zysk-z-lat-ubieglych" },
            { id: "item-52", text: "Niepokryta strata z lat ubiegÅ‚ych", category: "zysk-z-lat-ubieglych" },
            
            // KapitaÅ‚ wÅ‚asny - Zysk (strata) netto
            { id: "item-53", text: "Zysk netto bieÅ¼Ä…cego roku obrotowego", category: "zysk-netto" },
            { id: "item-54", text: "Strata netto bieÅ¼Ä…cego roku obrotowego", category: "zysk-netto" },
            
            // ZobowiÄ…zania - Rezerwy na zobowiÄ…zania
            { id: "item-55", text: "Rezerwa z tytuÅ‚u odroczonego podatku dochodowego", category: "rezerwy-na-zobowiazania" },
            { id: "item-56", text: "Rezerwa na Å›wiadczenia emerytalne i podobne", category: "rezerwy-na-zobowiazania" },
            { id: "item-57", text: "Rezerwa na naprawy gwarancyjne", category: "rezerwy-na-zobowiazania" },
            { id: "item-58", text: "Rezerwa restrukturyzacyjna", category: "rezerwy-na-zobowiazania" },
            { id: "item-59", text: "PozostaÅ‚e rezerwy", category: "rezerwy-na-zobowiazania" },
            
            // ZobowiÄ…zania - ZobowiÄ…zania dÅ‚ugoterminowe
            { id: "item-60", text: "Kredyty i poÅ¼yczki dÅ‚ugoterminowe", category: "zobowiazania-dlugoterminowe" },
            { id: "item-61", text: "ZobowiÄ…zania z tytuÅ‚u emisji dÅ‚uÅ¼nych papierÃ³w wartoÅ›ciowych", category: "zobowiazania-dlugoterminowe" },
            { id: "item-62", text: "ZobowiÄ…zania z tytuÅ‚u leasingu finansowego", category: "zobowiazania-dlugoterminowe" },
            { id: "item-63", text: "Inne zobowiÄ…zania dÅ‚ugoterminowe", category: "zobowiazania-dlugoterminowe" },
            
            // ZobowiÄ…zania - ZobowiÄ…zania krÃ³tkoterminowe
            { id: "item-64", text: "Kredyty i poÅ¼yczki krÃ³tkoterminowe", category: "zobowiazania-krotkoterminowe" },
            { id: "item-65", text: "ZobowiÄ…zania z tytuÅ‚u dostaw i usÅ‚ug", category: "zobowiazania-krotkoterminowe" },
            { id: "item-66", text: "ZobowiÄ…zania z tytuÅ‚u podatkÃ³w, ceÅ‚ i ubezpieczeÅ„", category: "zobowiazania-krotkoterminowe" },
            { id: "item-67", text: "ZobowiÄ…zania z tytuÅ‚u wynagrodzeÅ„", category: "zobowiazania-krotkoterminowe" },
            { id: "item-68", text: "Inne zobowiÄ…zania krÃ³tkoterminowe", category: "zobowiazania-krotkoterminowe" },
            { id: "item-69", text: "Fundusze specjalne", category: "zobowiazania-krotkoterminowe" },
            { id: "item-70", text: "Zaliczki otrzymane na dostawy", category: "zobowiazania-krotkoterminowe" }
        ];
        
        // Elementy dla trybu podstawowego - mapowanie szczegÃ³Å‚owych kategorii do czterech gÅ‚Ã³wnych
        const basicCategories = {
            "aktywa-trwale": ["wartosci-niematerialne", "rzeczowe-aktywa-trwale", "naleznosci-dlugoterminowe", "inwestycje-dlugoterminowe"],
            "aktywa-obrotowe": ["zapasy", "naleznosci-krotkoterminowe", "inwestycje-krotkoterminowe", "nalezne-wplaty", "udzialy-akcje-wlasne"],
            "kapital-wlasny": ["kapital-zakladowy", "kapital-zapasowy", "kapital-z-aktualizacji", "kapitaly-rezerwowe", "zysk-z-lat-ubieglych", "zysk-netto"],
            "zobowiazania": ["rezerwy-na-zobowiazania", "zobowiazania-dlugoterminowe", "zobowiazania-krotkoterminowe"]
        };
        
        // Zmienne globalne
        let currentScore = 0;
        let totalPoints = 0;
        let selectedItem = null; // Aktualnie wybrany element
        let isGameOver = false; // Czy Ä‡wiczenie zostaÅ‚o zakoÅ„czone (sprawdzone)
        
        // Po zaÅ‚adowaniu strony
        document.addEventListener('DOMContentLoaded', function() {
            initExercise();
            
            // Dodanie obsÅ‚ugi zdarzeÅ„ dla przyciskÃ³w
            document.getElementById('check-btn-basic').addEventListener('click', checkAnswers);
            document.getElementById('reset-btn-basic').addEventListener('click', resetExercise);
            
            // Dodanie obsÅ‚ugi zdarzeÅ„ dla zmian ustawieÅ„
            document.getElementById('items-count').addEventListener('change', resetExercise);
            document.getElementById('balanced-categories').addEventListener('change', resetExercise);
        });
        
        // Funkcja do inicjalizacji Ä‡wiczenia
        function initExercise() {
            // Resetowanie punktacji
            currentScore = 0;
            totalPoints = 0;
            document.getElementById('score').textContent = currentScore;
            document.getElementById('total-points').textContent = totalPoints;
            
            // Resetowanie stanu gry
            isGameOver = false;
            selectedItem = null;
            
            // Czyszczenie statusu
            document.getElementById('status-message').textContent = '';
            
            // Przygotowanie elementÃ³w i kategorii
            resetCategoriesAndItems();
        }
        
        // Funkcja resetujÄ…ca kategorie i elementy
        function resetCategoriesAndItems() {
            // Wyczyszczenie kontenerÃ³w
            const itemsContainer = document.getElementById('items-container-basic');
            itemsContainer.innerHTML = '';
            
            // Wyczyszczenie stref upuszczania
            const dropZones = document.querySelectorAll('.drop-zone');
            dropZones.forEach(zone => {
                // Zapisujemy tytuÅ‚ i czyÅ›cimy zawartoÅ›Ä‡
                const title = zone.querySelector('.drop-zone-title');
                zone.innerHTML = '';
                zone.appendChild(title);
                
                // Usuwamy klasy sprzÄ™Å¼enia zwrotnego
                zone.classList.remove('feedback-correct', 'feedback-incorrect', 'highlight');
                
                // Upewniamy siÄ™, Å¼e strefa ma przypisanÄ… funkcjÄ™ onclick
                zone.onclick = function() { dropItemToCategory(this); };
            });
            
            // WybÃ³r losowych elementÃ³w
            const itemsCount = parseInt(document.getElementById('items-count').value);
            const isBalanced = document.getElementById('balanced-categories').checked;
            let selectedItems = selectRandomItems(itemsCount, isBalanced);
            
            // Aktualizacja liczby punktÃ³w
            totalPoints = selectedItems.length;
            document.getElementById('total-points').textContent = totalPoints;
            
            // Dodanie instrukcji
            const instructionText = document.createElement('p');
            instructionText.className = 'text-sm text-gray-600 mb-3';
            itemsContainer.appendChild(instructionText);
            
            // Dodanie elementÃ³w do przyporzÄ…dkowania
            selectedItems.forEach(item => {
                // Mapowanie szczegÃ³Å‚owej kategorii na podstawowÄ…
                let basicCategory = getBasicCategory(item.category);
                
                // Utworzenie elementu
                const itemElement = document.createElement('div');
                itemElement.id = item.id;
                itemElement.className = 'item-box';
                itemElement.setAttribute('data-category', basicCategory);
                itemElement.textContent = item.text;
                itemElement.onclick = function(event) { event.stopPropagation(); selectItem(this); };
                
                // Dodanie do kontenera
                itemsContainer.appendChild(itemElement);
            });
        }
        
        // Funkcja obsÅ‚ugujÄ…ca wybÃ³r elementu
        function selectItem(element) {
            // JeÅ›li gra siÄ™ skoÅ„czyÅ‚a, nic nie robimy
            if (isGameOver) return;
            
            // Odznaczamy poprzednio wybrany element, jeÅ›li istnieje
            if (selectedItem) {
                selectedItem.classList.remove('selected');
            }
            
            // JeÅ›li klikniÄ™to na ten sam element, odznaczamy go
            if (selectedItem === element) {
                selectedItem = null;
                document.getElementById('status-message').textContent = '';
                
                // Usuwamy podÅ›wietlenie ze stref upuszczania
                document.querySelectorAll('.drop-zone').forEach(zone => {
                    zone.classList.remove('highlight');
                });
                
                return;
            }
            
            // Zaznaczamy nowy element
            selectedItem = element;
            selectedItem.classList.add('selected');
            
            // Informujemy uÅ¼ytkownika
            document.getElementById('status-message').textContent = 'Teraz kliknij kategoriÄ™, do ktÃ³rej chcesz przypisaÄ‡ wybrany element.';
            
            // PodÅ›wietlamy wszystkie strefy upuszczania
            document.querySelectorAll('.drop-zone').forEach(zone => {
                zone.classList.add('highlight');
            });
        }
        
        // Funkcja obsÅ‚ugujÄ…ca upuszczanie elementu do kategorii
        function dropItemToCategory(dropZone) {
            // JeÅ›li gra siÄ™ skoÅ„czyÅ‚a lub nie ma wybranego elementu, nic nie robimy
            if (isGameOver || !selectedItem) return;
            
            // Przenosimy wybrany element do strefy docelowej
            dropZone.appendChild(selectedItem);
            
            // Upewniamy siÄ™, Å¼e element nadal ma przypisanÄ… funkcjÄ™ onclick
            // Jest to kluczowe, aby moÅ¼na byÅ‚o pÃ³Åºniej ponownie przenieÅ›Ä‡ element
            selectedItem.onclick = function(event) { event.stopPropagation(); selectItem(this); };
            
            // Odznaczamy element
            selectedItem.classList.remove('selected');
            selectedItem = null;
            
            // Usuwamy podÅ›wietlenie ze wszystkich stref
            document.querySelectorAll('.drop-zone').forEach(zone => {
                zone.classList.remove('highlight');
            });
            
            // CzyÅ›cimy status
            document.getElementById('status-message').textContent = '';
        }
        
        // Funkcja obsÅ‚ugujÄ…ca sprawdzanie odpowiedzi
        function checkAnswers() {
            // JeÅ›li gra siÄ™ juÅ¼ skoÅ„czyÅ‚a, nic nie robimy
            if (isGameOver) return;
            
            // Oznaczamy, Å¼e gra siÄ™ skoÅ„czyÅ‚a
            isGameOver = true;
            
            // JeÅ›li jest aktualnie wybrany element, odznacz go
            if (selectedItem) {
                selectedItem.classList.remove('selected');
                selectedItem = null;
            }
            
            // Usuwamy podÅ›wietlenie ze stref upuszczania
            document.querySelectorAll('.drop-zone').forEach(zone => {
                zone.classList.remove('highlight');
            });
            
            let correctCount = 0;
            
            // Sprawdzamy kaÅ¼dÄ… strefÄ™ upuszczania
            document.querySelectorAll('.drop-zone').forEach(zone => {
                const category = zone.getAttribute('data-category');
                const items = zone.querySelectorAll('.item-box');
                
                let allCorrect = true;
                
                // Sprawdzamy kaÅ¼dy element w strefie
                items.forEach(item => {
                    const itemCategory = item.getAttribute('data-category');
                    
                    if (itemCategory === category) {
                        // Poprawna kategoria
                        item.style.borderColor = '#10B981';
                        item.style.backgroundColor = 'rgba(167, 243, 208, 0.2)';
                        correctCount++;
                    } else {
                        // Niepoprawna kategoria
                        item.style.borderColor = '#EF4444';
                        item.style.backgroundColor = 'rgba(254, 202, 202, 0.2)';
                        allCorrect = false;
                    }
                    
                    // WyÅ‚Ä…czamy moÅ¼liwoÅ›Ä‡ klikania
                    item.onclick = null;
                    item.style.cursor = 'default';
                });
                
                // Oznaczamy strefÄ™ jako poprawnÄ…/niepoprawnÄ…
                if (items.length > 0) {
                    if (allCorrect) {
                        zone.classList.add('feedback-correct');
                    } else {
                        zone.classList.add('feedback-incorrect');
                    }
                }
                
                // WyÅ‚Ä…czamy funkcjonalnoÅ›Ä‡ upuszczania
                zone.onclick = null;
                zone.style.cursor = 'default';
            });
            
            // Aktualizacja wyniku
            currentScore = correctCount;
            document.getElementById('score').textContent = currentScore;
            
            // Dezaktywacja przycisku sprawdzania
            const checkBtn = document.getElementById('check-btn-basic');
            checkBtn.disabled = true;
            checkBtn.classList.add('disabled-button');
            
            // WyÅ›wietlenie podsumowania
            const statusMessage = document.getElementById('status-message');
            if (correctCount === totalPoints) {
                statusMessage.textContent = 'Brawo! Wszystkie elementy zostaÅ‚y poprawnie przyporzÄ…dkowane!';
                statusMessage.className = 'mt-3 text-green-600 font-bold';
            } else {
                statusMessage.textContent = `Poprawnie przyporzÄ…dkowano ${correctCount} z ${totalPoints} elementÃ³w.`;
                statusMessage.className = 'mt-3 text-purple-600';
            }
        }
        
        // Funkcja resetujÄ…ca Ä‡wiczenie
        function resetExercise() {
            // Resetujemy przycisk sprawdzania
            const checkBtn = document.getElementById('check-btn-basic');
            checkBtn.disabled = false;
            checkBtn.classList.remove('disabled-button');
            checkBtn.style.opacity = '';
            checkBtn.style.cursor = '';
            
            // Inicjalizujemy Ä‡wiczenie od nowa
            initExercise();
        }
        
        // Funkcja wybierajÄ…ca losowe elementy
        function selectRandomItems(count, balanced) {
            if (balanced) {
                return selectBalancedItems(count);
            } else {
                return getRandomItems(bilansItems, count);
            }
        }
        
        // Funkcja wybierajÄ…ca zrÃ³wnowaÅ¼one elementy
        function selectBalancedItems(count) {
            // Dzielimy elementy wedÅ‚ug podstawowych kategorii
            const aktywatrwale = bilansItems.filter(item => 
                basicCategories["aktywa-trwale"].includes(item.category));
            const aktywaobrotowe = bilansItems.filter(item => 
                basicCategories["aktywa-obrotowe"].includes(item.category));
            const kapitalwlasny = bilansItems.filter(item => 
                basicCategories["kapital-wlasny"].includes(item.category));
            const zobowiazania = bilansItems.filter(item => 
                basicCategories["zobowiazania"].includes(item.category));
            
            // OkreÅ›lamy ile elementÃ³w na kategoriÄ™
            const itemsPerCategory = Math.ceil(count / 4);
            
            // Wybieramy po rÃ³wno z kaÅ¼dej kategorii
            let selectedItems = [
                ...getRandomItems(aktywatrwale, itemsPerCategory),
                ...getRandomItems(aktywaobrotowe, itemsPerCategory),
                ...getRandomItems(kapitalwlasny, itemsPerCategory),
                ...getRandomItems(zobowiazania, itemsPerCategory)
            ];
            
            // Ogranicz do Å¼Ä…danej liczby elementÃ³w i wymieszaj
            return getRandomItems(selectedItems, count);
        }
        
        // Funkcja pomocnicza do losowego wybierania elementÃ³w z tablicy
        function getRandomItems(array, n) {
            const shuffled = [...array].sort(() => Math.random() - 0.5);
            return shuffled.slice(0, n);
        }
        
        // Funkcja mapujÄ…ca szczegÃ³Å‚owÄ… kategoriÄ™ na podstawowÄ…
        function getBasicCategory(detailedCategory) {
            for (let [basicCategory, detailedCategories] of Object.entries(basicCategories)) {
                if (detailedCategories.includes(detailedCategory)) {
                    return basicCategory;
                }
            }
            return detailedCategory; // JeÅ›li nie znaleziono, zwrÃ³Ä‡ oryginalnÄ… kategoriÄ™
        }
    </script>
</body>
</html>